p8105_hw3_sp4170.rmd
================
Shihui Peng
2023-10-14

# Problem 2

Load the data from the p8105.datasets package.

``` r
library(p8105.datasets)
data("brfss_smart2010")
```

## data cleaning

- First, do some data cleaning:
  - format the data to use appropriate variable names using
    `janitor::clean_names()`;
  - focus on the “Overall Health” topic using `filter()`
  - include only responses from “Excellent” to “Poor” also using
    `filter()`
  - organize responses as a factor taking levels ordered from “Poor” to
    “Excellent” using `mutate()` and `fct_relevel()`.

``` r
brfss_df =
brfss_smart2010 |> 
  janitor::clean_names() |> 
  filter(
    topic == 'Overall Health', 
    response == 'Excellent' | response == 'Very good' | response =='Good' | response == 'Fair' | response == 'Poor') |> 
  mutate(
    response = fct_relevel(response, c('Poor', 'Fair', 'Good', 'Very good', 'Excellent'))
  )
```

## answer questions

### Question 1

In 2002, which states were observed at 7 or more locations? What about
in 2010?

``` r
brfss_df |> 
  filter(year == 2002) |> 
  group_by(locationabbr) |> 
  summarise(n_locations = n_distinct(locationdesc)) |> 
  filter(n_locations >= 7)
```

    ## # A tibble: 6 × 2
    ##   locationabbr n_locations
    ##   <chr>              <int>
    ## 1 CT                     7
    ## 2 FL                     7
    ## 3 MA                     8
    ## 4 NC                     7
    ## 5 NJ                     8
    ## 6 PA                    10

- in 2002, states **CT, FL, MA, NC, NJ, and PA** were observed at 7 or
  more locations.

``` r
brfss_df |> 
  filter(year == 2010) |> 
  group_by(locationabbr) |> 
  summarise(n_locations = n_distinct(locationdesc)) |> 
  filter(n_locations >= 7)
```

    ## # A tibble: 14 × 2
    ##    locationabbr n_locations
    ##    <chr>              <int>
    ##  1 CA                    12
    ##  2 CO                     7
    ##  3 FL                    41
    ##  4 MA                     9
    ##  5 MD                    12
    ##  6 NC                    12
    ##  7 NE                    10
    ##  8 NJ                    19
    ##  9 NY                     9
    ## 10 OH                     8
    ## 11 PA                     7
    ## 12 SC                     7
    ## 13 TX                    16
    ## 14 WA                    10

- in 2010, states **CA, CO, FL, MA, MD, NC, NE, NJ, NY, OH, PA, SC, TX,
  and WA** were observed at 7 or more locations.
