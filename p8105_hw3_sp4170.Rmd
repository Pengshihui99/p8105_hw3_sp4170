---
title: "p8105_hw3_sp4170.rmd"
author: "Shihui Peng"
date: "2023-10-14"
output: github_document
---
```{r, echo=FALSE, message=FALSE}
library(tidyverse)
```


# Problem 2

Load the data from the p8105.datasets package.
```{r}
library(p8105.datasets)
data("brfss_smart2010")
```

## data cleaning

* First, do some data cleaning:
  * format the data to use appropriate variable names using `janitor::clean_names()`;
  * focus on the “Overall Health” topic using `filter()`
  * include only responses from “Excellent” to “Poor” also using `filter()`
  * organize responses as a factor taking levels ordered from “Poor” to “Excellent” using `mutate()` and `fct_relevel()`.
```{r}
brfss_df =
brfss_smart2010 |> 
  janitor::clean_names() |> 
  filter(
    topic == 'Overall Health', 
    response == 'Excellent' | response == 'Very good' | response =='Good' | response == 'Fair' | response == 'Poor') |> 
  mutate(
    response = fct_relevel(response, c('Poor', 'Fair', 'Good', 'Very good', 'Excellent'))
  )
```

## answer questions

### Question 1

In 2002, which states were observed at 7 or more locations? What about in 2010?

```{r}
brfss_df |> 
  filter(year == 2002) |> 
  group_by(locationabbr) |> 
  summarise(n_locations = n_distinct(locationdesc)) |> 
  filter(n_locations >= 7)
```

* in 2002, states **CT, FL, MA, NC, NJ, and PA** were observed at 7 or more locations.

```{r}
brfss_df |> 
  filter(year == 2010) |> 
  group_by(locationabbr) |> 
  summarise(n_locations = n_distinct(locationdesc)) |> 
  filter(n_locations >= 7)
```

* in 2010, states **CA, CO, FL, MA, MD, NC, NE, NJ, NY, OH, PA, SC, TX, and WA** were observed at 7 or more locations.

